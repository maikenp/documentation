

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Changing file ownership &mdash; Sigma2 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/sigma2.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Sigma2/Metacenter documentation
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">News</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://opslog.sigma2.no">Latest changes and events</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.sigma2.no/hardware-status">Hardware live status</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting help</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_help/support_line.html">Support line</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_help/how_to_write_good_support_requests.html">Writing good support requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_help/qa-sessions.html">Open Question &amp; Answer Sessions for All Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_help/lost_forgotten_password.html">Lost or expiring password</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_help/project_leader_support.html">Project leader support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_help/advanced_user_support.html">Advanced User Support (AUS)</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/applying_account.html">How do I get an HPC account?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/applying_resources.html">Applying for computing and storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/training.html">Training material</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/editing_files.html">Editing files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/create_ssh_keys.html">SSH</a></li>
</ul>
<p class="caption"><span class="caption-text">Services</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../nird_archive/user-guide.html">Research data archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nird_toolkit/overview.html">NIRD Toolkit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../services/easydmp-user-documentation.html">EasyDMP User Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_help/course_resources.html">CRaaS - Course Resources as a Service</a></li>
</ul>
<p class="caption"><span class="caption-text">High-performance computing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../hpc_machines/hardware_overview.html">Overview over our machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hpc_machines/betzy.html">Betzy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hpc_machines/fram.html">Fram</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hpc_machines/saga.html">Saga</a></li>
<li class="toctree-l1"><a class="reference external" href="https://hpc-uit.readthedocs.io">Stallo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hpc_machines/migration2metacenter.html">Migration to a Metacenter HPC machine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jobs/overview.html">Job types and job scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code_development/overview.html">Code development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../computing/tuning-applications.html">Tuning applications</a></li>
</ul>
<p class="caption"><span class="caption-text">Software</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../software/modulescheme.html">Software Module Scheme</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/installed_software.html">Installed Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/userinstallsw.html">Installing software as user</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/containers.html">Running Singularity and Docker containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/appguides.html">Application guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/licenses.html">Licenses and access policies</a></li>
</ul>
<p class="caption"><span class="caption-text">Files and Storage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="nird.html">NIRD - National Infrastructure for Research Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="clusters.html">Storage areas on HPC clusters</a></li>
<li class="toctree-l1"><a class="reference internal" href="backup.html">Backup on Betzy, Fram, Saga, and NIRD</a></li>
<li class="toctree-l1"><a class="reference internal" href="sharing_files.html">Data handling and storage policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="file_transfer.html">File transfer</a></li>
<li class="toctree-l1"><a class="reference internal" href="performance.html">Storage performance tuning</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Sigma2/Metacenter documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Changing file ownership</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/UNINETTSigma2/documentation/blob/master/files_storage/change_file_ownership.md" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="changing-file-ownership">
<h1>Changing file ownership<a class="headerlink" href="#changing-file-ownership" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>This is cluster specific</strong></p>
<p>This page is only relevant for Fram and Saga - <strong>not Betzy</strong>, as disk quotas on Betzy are based on directories instead of groups.</p>
</div>
<p>Since file permissions are persistent across the file system, it might be necessary to manually change the ownership of one or more files.
This page will show an example of how to change ownership on a file that was moved from <code class="docutils literal notranslate"><span class="pre">$HOME</span></code> to <code class="docutils literal notranslate"><span class="pre">$USERWORK</span></code> in order to update the disk quotas.</p>
<p>We have a file in our <code class="docutils literal notranslate"><span class="pre">$HOME</span></code> called “myfile.txt” which is 1 GiB in size that we’re moving to <code class="docutils literal notranslate"><span class="pre">$USERWORK</span></code> for use in a job:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[username@login-3.SAGA ~/example]$ ls -l
total 1048576
-rw-rw-r-- 1 username username_g 1073741824 Nov 13 13:11 myfile.txt

[username@login-3.SAGA ~/example]$ mv myfile.txt /cluster/work/users/username

</pre></div>
</div>
<p>By checking our disk usage with <code class="docutils literal notranslate"><span class="pre">dusage</span></code> we can see that the file is still counted towards the <code class="docutils literal notranslate"><span class="pre">$HOME</span></code> quota:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[username@login-3.SAGA ~/example]$ dusage
No options specified, assuming &quot;-a&quot;. For help, use &quot;-h&quot; option.

===============================================================================
Block quota usage on: SAGA
===============================================================================
File system    User/Group          Usage          Soft Limit     Hard Limit     
-------------------------------------------------------------------------------
username_g     $HOME               1.0 GiB        20.0 GiB       20.0 GiB       
username       username (u)        1.0 GiB        0 Bytes        0 Bytes        
username       username (g)        0 Bytes        0 Bytes        0 Bytes      
dgi            dgi (g)             0 Bytes        0 Bytes        0 Bytes        
===============================================================================
</pre></div>
</div>
<p>The reason for this is that the file is still owned by the <code class="docutils literal notranslate"><span class="pre">username_g</span></code> group, which is used for the <code class="docutils literal notranslate"><span class="pre">$HOME</span></code> quota.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[username@login-3.SAGA /cluster/work/users/username]$ ls -l
total 1048576
-rw-rw-r-- 1 username username_g 1073741824 Nov 13 13:11 myfile.txt
</pre></div>
</div>
<p>Files in <code class="docutils literal notranslate"><span class="pre">$USERWORK</span></code> should be owned by the default user group, in this - the group named <code class="docutils literal notranslate"><span class="pre">username</span></code>.
To change the file group ownership we can use the command <code class="docutils literal notranslate"><span class="pre">chgrp</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[username@login-3.SAGA /cluster/work/users/username]$ chgrp username myfile.txt 
[username@login-3.SAGA /cluster/work/users/username]$ ls -l
total 1048576
-rw-rw-r-- 1 username username 1073741824 Nov 13 13:11 myfile.txt
</pre></div>
</div>
<p>The file is now owned by the correct group and we can verify that the disk quotas have been updated by running <code class="docutils literal notranslate"><span class="pre">dusage</span></code> again:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[username@login-3.SAGA /cluster/work/users/username]$ dusage
No options specified, assuming &quot;-a&quot;. For help, use &quot;-h&quot; option.

===============================================================================
Block quota usage on: SAGA
===============================================================================
File system    User/Group          Usage          Soft Limit     Hard Limit     
-------------------------------------------------------------------------------
username_g     $HOME               0 Bytes        20.0 GiB       20.0 GiB       
username       username (u)        1.0 GiB        0 Bytes        0 Bytes        
username       username (g)        1.0 GiB        0 Bytes        0 Bytes      
dgi            dgi (g)             0 Bytes        0 Bytes        0 Bytes         
===============================================================================
</pre></div>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, Sigma2/Metacenter.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>